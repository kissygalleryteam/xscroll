KISSY.add("kg/xscroll/3.0.0/events",["./util"],function(t,e,n,i){var s=e("./util"),r=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},l={on:function(t,e,n){if(!o(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!o(this,"once",t,[e,n])||!e)return this;var i=this,s=r(function(){i.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,n)},off:function(t,e,n){if(!this._events||!o(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(var i=t?[t]:Object.keys(this._events),s=0,r=i.length;r>s;s++){t=i[s];var l=this._events[t];if(l)if(e||n){for(var c=[],a=0,h=l.length;h>a;a++){var f=l[a];(e&&e!==f.callback&&e!==f.callback._callback||n&&n!==f.context)&&c.push(f)}c.length?this._events[t]=c:delete this._events[t]}else delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=Array.prototype.slice.call(arguments,1);if(!o(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&a(n,e),i&&a(i,arguments),this},listenTo:function(t,e,n){var i=this._listeningTo||(this._listeningTo={}),r=t._listenId||(t._listenId=s.guid("l"));return i[r]=t,n||"object"!=typeof e||(n=this),t.on(e,n,this),this},listenToOnce:function(t,e,n){if("object"==typeof e){for(var i in e)this.listenToOnce(t,i,e[i]);return this}var s=r(function(){this.stopListening(t,e,s),n.apply(this,arguments)});return s._callback=n,this.listenTo(t,e,s)},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((i={})[t._listenId]=t);for(var l in i)t=i[l],t.off(e,n,this),(r||s.isEmpty(t._events))&&delete this._listeningTo[l];return this}},c=/\s+/,o=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)t[e].apply(t,[s,n[s]].concat(i));return!1}if(c.test(n)){for(var r=n.split(c),l=0,o=r.length;o>l;l++)t[e].apply(t,[r[l]].concat(i));return!1}return!0},a=function(t,e){var n,i=-1,s=t.length,r=e[0],l=e[1],c=e[2];switch(e.length){case 0:for(;++i<s;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r,l);return;case 3:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r,l,c);return;default:for(;++i<s;)(n=t[i]).callback.apply(n.ctx,e);return}};return l.bind=l.on,l.unbind=l.off,"object"==typeof i&&i.exports?void(i.exports=l):l});