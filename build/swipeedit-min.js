/*!build time : 2014-12-18 5:12:53 PM*/
KISSY.add("kg/xscroll/2.3.1/swipeedit",function(a,b,c){var d,e=b.prefixStyle("transform"),f=b.prefixStyle("transition"),g="xs-plugin-swipeedit-",h=!1,i=20,j=!1,k=!1,l=b.vendor?["-",b.vendor,"-transform"].join(""):"transform",m=1,n=function(a){n.superclass.constructor.call(this),this.userConfig=b.mix({labelSelector:g+"label",renderHook:function(a){a.innerHTML=tpl}},a)};return b.extend(n,c,{pluginId:"xlist/plugin/swipeedit",pluginInitializer:function(a){var b=this;b.xlist=a,b._bindEvt()},pluginDestructor:function(){},getTransformX:function(a){if(!a)return"";var b=getComputedStyle(a)[e].match(/[-\d\.*\d*]+/g);return b?b[4]/1:0},_bindEvt:function(){var a=this,b=a.xlist,c=null;b.on("panstart",function(b){k=!1,b.cell&&b.cell.element&&(c=b.cell.element.querySelector(a.userConfig.labelSelector),c&&(d=a.getTransformX(c),c.style[f]="none",Math.abs(d)>0&&!j&&a.slideRight(b)))}),b.on("pan",function(g){if(c)if("left"==g.touch.directionX&&a.slideAllExceptRow(g.cell._row),Math.abs(g.deltaY)<10&&Math.abs(g.deltaX)/Math.abs(g.deltaY)>4&&Math.abs(g.deltaX)>i){h=!0,b.userConfig.lockY=!0;var j=d+g.deltaX+i;if(j>0)return;c.style[f]="none",c.style[e]="translateX("+j+"px)"}else h||(b.userConfig.lockY=!1)}),b.on("panend",function(b){if(c){h=!1;var d=a.getTransformX(c);"left"==b.touch.directionX&&Math.abs(b.velocityX)>m?a.slideLeftHandler(b):Math.abs(d)<a.userConfig.width/2?a.slideRightHandler(b):Math.abs(d)>=a.userConfig.width/2&&a.slideLeftHandler(b)}}),document.body.addEventListener("webkitTransitionEnd",function(b){new RegExp(a.userConfig.labelSelector.replace(/\./,"")).test(b.target.className)&&(j=!1)})},slideLeft:function(a){var b=this,c=b.xlist,d=c.getCellByRowOrCol(a);if(d&&d.element){var g=d.element.querySelector(b.userConfig.labelSelector);g&&g.style&&(g.style[e]="translateX(-"+b.userConfig.width+"px) ",g.style[f]=l+" 0.15s ease",c.getData(0,a).data.status="delete")}},slideRight:function(a){var b=this,c=b.xlist,d=c.getCellByRowOrCol(a);if(d&&d.element){var g=d.element.querySelector(b.userConfig.labelSelector);if(g&&g.style){var h=window.getComputedStyle(g)[e].match(/[-\d\.*\d*]+/g),i=h?Math.round(h[4]):0;0!=i&&(g.style[e]="translateX(0)",g.style[f]=l+" 0.5s ease",c.getData(0,a).data.status="")}}},slideLeftHandler:function(a){var b=this;j=!0,b.slideLeft(a.cell._row)},slideRightHandler:function(a){var b=this;k=!0,j=!0,b.slideRight(a.cell._row)},slideAllExceptRow:function(a){var b=this,c=b.xlist;for(var d in c.infiniteElementsCache)(a!=c.infiniteElementsCache[d]._row||void 0===a)&&b.slideRight(c.infiniteElementsCache[d]._row)}}),n},{requires:["./util","./base"]});