KISSY.add("kg/xscroll/2.3.2/timer",["./util","./base","./easing","./bezier"],function(n,e,t,i){function r(n){var e=this;e.cfg=o.mix({easing:"linear"},n)}for(var o=e("./util"),a=e("./base"),s=e("./easing"),u=e("./bezier"),d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)},c=["webkit","moz","ms","o"],p=window.cancelAnimationFrame,w=0;w<c.length;w++)(window[c[w]+"CancelAnimationFrame"]||window[c[w]+"CancelRequestAnimationFrame"])&&(p=window[c[w]+"CancelAnimationFrame"]||window[c[w]+"CancelRequestAnimationFrame"]);return p=p||window.clearTimeout,o.extend(r,a,{reset:function(n){var e=this;o.mix(e.cfg,n),e.isfinished=!1,e.percent=0,delete e._stop},run:function(){var n=this,e=n.cfg.duration;if(!(0>=e||n.isfinished)){n._hasFinishedPercent=n._stop&&n._stop.percent||0,delete n._stop,n.start=Date.now(),n.percent=0;var t=1e3/60/e/4,i=s[n.cfg.easing];n.easingFn=u(i[0],i[1],i[2],i[3],t),n._run()}},_run:function(){var n=this;p(n._raf),n._raf=d(function(){if(n.now=Date.now(),n.duration=n.now-n.start,n.progress=n.easingFn(n.duration/n.cfg.duration),n.percent=n.duration/n.cfg.duration+n._hasFinishedPercent,n.percent>=1||n._stop){n.percent=n._stop&&n._stop.percent?n._stop.percent:1,n.duration=n._stop&&n._stop.duration?n._stop.duration:n.duration;var e={percent:n.percent,duration:n.duration};return n.fire("run",e),n.fire("stop",e),void(n.percent>=1&&(n.isfinished=!0,n.fire("end",{percent:1,duration:n.duration})))}n.fire("run",{percent:n.progress,duration:n.duration}),n._run()})},stop:function(){var n=this;n._stop={percent:n.percent,duration:n.duration,now:n.now},p(n._raf)}}),"object"==typeof i&&i.exports?void(i.exports=r):r});