KISSY.add("kg/xscroll/3.0.0/timer",["./util","./base","./easing"],function(n,e,t,r){function i(n,e,t,r,i){var o=function(e){var r=1-e;return 3*r*r*e*n+3*r*e*e*t+e*e*e},a=function(n){var t=1-n;return 3*t*t*n*e+3*t*n*n*r+n*n*n},s=function(e){var r=1-e;return 3*(2*(e-1)*e+r*r)*n+3*(-e*e*e+2*r*e)*t};return function(n){var e,t,r,u,c,d,f=n;for(r=f,d=0;8>d;d++){if(u=o(r)-f,Math.abs(u)<i)return a(r);if(c=s(r),Math.abs(c)<1e-6)break;r-=u/c}if(e=0,t=1,r=f,e>r)return a(e);if(r>t)return a(t);for(;t>e;){if(u=o(r),Math.abs(u-f)<i)return a(r);f>u?e=r:t=r,r=.5*(t-e)+e}return a(r)}}function o(n){var e=this;e.cfg=a.mix({easing:"linear"},n)}for(var a=e("./util"),s=e("./base"),u=e("./easing"),c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)},d=["webkit","moz","ms","o"],f=window.cancelAnimationFrame,p=0;p<d.length;p++)(window[d[p]+"CancelAnimationFrame"]||window[d[p]+"CancelRequestAnimationFrame"])&&(f=window[d[p]+"CancelAnimationFrame"]||window[d[p]+"CancelRequestAnimationFrame"]);return f=f||window.clearTimeout,o.MIN_DURATION=1,a.extend(o,s,{reset:function(n){var e=this;a.mix(e.cfg,n),e.isfinished=!1,e.percent=0,delete e._stop},run:function(){var n=this,e=n.cfg.duration;if(e<=o.MIN_DURATION&&(n.isfinished=!0,n.trigger("run",{percent:1}),n.trigger("end",{percent:1})),!n.isfinished){n._hasFinishedPercent=n._stop&&n._stop.percent||0,delete n._stop,n.start=Date.now(),n.percent=0;var t=1e3/60/e/4,r=u[n.cfg.easing];n.easingFn=i(r[0],r[1],r[2],r[3],t),n._run()}},_run:function(){var n=this;f(n._raf),n._raf=c(function(){if(n.now=Date.now(),n.duration=n.now-n.start>=n.cfg.duration?n.cfg.duration:n.now-n.start,n.progress=n.easingFn(n.duration/n.cfg.duration),n.percent=n.duration/n.cfg.duration+n._hasFinishedPercent,n.percent>=1||n._stop){n.percent=n._stop&&n._stop.percent?n._stop.percent:1,n.duration=n._stop&&n._stop.duration?n._stop.duration:n.duration;var e={percent:n.percent};return n.trigger("stop",e),void(n.percent>=1&&(n.isfinished=!0,n.trigger("end",{percent:1})))}n.trigger("run",{percent:n.progress}),n._run()})},stop:function(){var n=this;n._stop={percent:n.percent,now:n.now},f(n._raf)}}),"object"==typeof r&&r.exports?void(r.exports=o):o});