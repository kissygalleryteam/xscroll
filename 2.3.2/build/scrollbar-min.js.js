KISSY.add("kg/xscroll/2.3.2/scrollbar",["./util"],function(t,o,e,r){var i=o("./util"),s=60,l=8,n=i.prefixStyle("transform"),a=i.vendor?["-",i.vendor,"-transform"].join(""):"transform",c=i.prefixStyle("transition"),d=(i.prefixStyle("borderRadius"),i.prefixStyle("transitionDuration")),u=function(t){this.userConfig=t,this.init(t.xscroll)};return i.mix(u.prototype,{init:function(t){var o=this;o.xscroll=t,o.type=o.userConfig.type,o.isY="y"==o.type?!0:!1;var e=o.xscroll.boundry;o.containerSize=o.isY?o.xscroll.containerHeight+e._xtop+e._xbottom:o.xscroll.containerWidth+e._xright+e._xleft,o.indicateSize=o.isY?o.xscroll.height:o.xscroll.width,o.offset=o.xscroll.getOffset(),o.render(),o._bindEvt()},destroy:function(){var t=this;t.scrollbar&&t.scrollbar.remove(),t.xscroll.detach("scaleanimate",t._update,t),t.xscroll.detach("scrollend",t._update,t),t.xscroll.detach("scrollanimate",t._update,t),!t.xscroll.userConfig.useTransition&&t.xscroll.detach("scroll",t._update,t),delete t},render:function(){var t=this;if(!t.__isRender){t.__isRender=!0;var o=t.xscroll,e=o.userConfig.gpuAcceleration?" translateZ(0) ":"",r=e?a+":"+e+";":"",i=t.isY?"opacity:0;width: 2px;position:absolute;bottom:5px;top:5px;right:2px;z-index:999;overflow:hidden;-webkit-border-radius:2px;-moz-border-radius:2px;-o-border-radius:2px;"+r:"opacity:0;height:2px;position:absolute;left:5px;right:5px;bottom:2px;z-index:999;overflow:hidden;-webkit-border-radius:2px;-moz-border-radius:2px;-o-border-radius:2px;"+r;t.scrollbar=document.createElement("div"),t.scrollbar.style.cssText=i,o.renderTo.appendChild(t.scrollbar);var s=t.isY?"width:100%;":"height:100%;";t.indicate=document.createElement("div"),t.indicate.style.cssText=s+"position:absolute;background:rgba(0,0,0,0.3);-webkit-border-radius:2px;-moz-border-radius:2px;-o-border-radius:2px;",t.scrollbar.appendChild(t.indicate),t._update(),t.hide()}},_update:function(t,o,e){var r=this,t=t||r.xscroll.getOffset(),i=r.computeScrollBar(t),s=r.isY?"height":"width";r.indicate.style[s]=Math.round(i.size)+"px",o&&e?r.scrollTo(i.offset,o,e):r.moveTo(i.offset)},computeScrollBar:function(t){var o=this,e=o.isY?"y":"x",t=Math.round(t&&-t[e]),r=10,i=o.xscroll.boundry;o.containerSize=o.isY?o.xscroll.containerHeight+i._xtop+i._xbottom:o.xscroll.containerWidth+i._xright+i._xleft,o.size=o.isY?o.xscroll.height:o.xscroll.width,o.indicateSize=o.isY?o.xscroll.height-r:o.xscroll.width-r;var n=o.indicateSize,a=o.containerSize,c=a-o.size,d=t/a,u=n*d,x=Math.round(n*o.size/a),f=u*(n-s+x)/n;if(s>x&&(x=s,u=f),0>u)u=Math.abs(t)*x/s>x-l?l-x:t*x/s;else if(u+x>n&&t-c>0){var p=t-a+n+r;u=p*x/s>x-l?n+r-l:n+r-x+p*x/s}o.barOffset=Math.round(u);var h={size:Math.round(x)},p={};return p[e]=o.barOffset,h.offset=p,h},scrollTo:function(t,o,e){var r=this,i=r.xscroll.userConfig.gpuAcceleration?" translateZ(0) ":"";r.indicate.style[n]=r.isY?"translateY("+t.y+"px) "+i:"translateX("+t.x+"px) "+i,r.indicate.style[c]=["all ",o,"s ",e," 0"].join("")},moveTo:function(t){var o=this;o.show();var e=o.xscroll.userConfig.gpuAcceleration?" translateZ(0) ":"";o.indicate.style[n]=o.isY?"translateY("+t.y+"px) "+e:"translateX("+t.x+"px) "+e,i.isBadAndroid()?o.indicate.style[d]="0.001s":o.indicate.style[c]=""},_bindEvt:function(){var t=this;if(!t.__isEvtBind){t.__isEvtBind=!0;var o=t.isY?"y":"x",e=function(o){return"x"==o?t.xscroll.isBoundryOutLeft()&&t.xscroll.isBoundryOutRight():t.xscroll.isBoundryOutTop()&&t.xscroll.isBoundryOutBottom()};t.xscroll.userConfig.useTransition?(t.xscroll.on("pan",function(o){t._update(o.offset)}),t.xscroll.on("scrollanimate",function(e){e.zoomType==o&&t._update(e.offset,e.duration,e.easing)}),t.xscroll.on("scaleanimate",function(o){t._update(o.offset)})):t.xscroll.on("scroll",function(o){t._update(o.offset)}),t.xscroll.on("panend",function(r){Math.abs(0==r.velocity)&&!e(o)&&t.hide()}),t.xscroll.on("scrollend",function(r){r.zoomType.indexOf(o)>-1&&(t._update(r.offset),e(r.zoomType)||t.hide())})}},reset:function(){var t=this;t.offset={x:0,y:0},t._update()},hide:function(){var t=this;t.scrollbar.style.opacity=0,t.scrollbar.style[c]="opacity 0.3s ease-out .5s"},show:function(){var t=this;t.scrollbar.style.opacity=1,i.isBadAndroid()?t.scrollbar.style[d]="0.001s":t.scrollbar.style[c]=""}}),"object"==typeof r&&r.exports?void(r.exports=u):u});