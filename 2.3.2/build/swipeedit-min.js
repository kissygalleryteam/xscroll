KISSY.add("kg/xscroll/2.3.2/swipeedit",["./util","./base"],function(e,t,l,i){var n,r=t("./util"),s=t("./base"),a=r.prefixStyle("transform"),o=r.prefixStyle("transition"),d="xs-plugin-swipeedit-",c=!1,f=20,u=!1,g=!1,h=r.vendor?["-",r.vendor,"-transform"].join(""):"transform",p=1,v=function(e){v.superclass.constructor.call(this),this.userConfig=r.mix({labelSelector:d+"label",renderHook:function(e){e.innerHTML=tpl}},e)};return r.extend(v,s,{pluginId:"xlist/plugin/swipeedit",pluginInitializer:function(e){var t=this;t.xlist=e,t._bindEvt()},pluginDestructor:function(){},getTransformX:function(e){if(!e)return"";var t=getComputedStyle(e)[a].match(/[-\d\.*\d*]+/g);return t?t[4]/1:0},_bindEvt:function(){var e=this,t=e.xlist,l=null;t.on("panstart",function(t){g=!1,t.cell&&t.cell.element&&(l=t.cell.element.querySelector(e.userConfig.labelSelector),l&&(n=e.getTransformX(l),l.style[o]="none",Math.abs(n)>0&&!u&&e.slideRight(t)))}),t.on("pan",function(i){if(l)if("left"==i.touch.directionX&&e.slideAllExceptRow(i.cell._row),Math.abs(i.deltaY)<10&&Math.abs(i.deltaX)/Math.abs(i.deltaY)>4&&Math.abs(i.deltaX)>f){c=!0,t.userConfig.lockY=!0;var r=n+i.deltaX+f;if(r>0)return;l.style[o]="none",l.style[a]="translateX("+r+"px)"}else c||(t.userConfig.lockY=!1)}),t.on("panend",function(t){if(l){c=!1;var i=e.getTransformX(l);"left"==t.touch.directionX&&Math.abs(t.velocityX)>p?e.slideLeftHandler(t):Math.abs(i)<e.userConfig.width/2?e.slideRightHandler(t):Math.abs(i)>=e.userConfig.width/2&&e.slideLeftHandler(t)}}),document.body.addEventListener("webkitTransitionEnd",function(t){new RegExp(e.userConfig.labelSelector.replace(/\./,"")).test(t.target.className)&&(u=!1)})},slideLeft:function(e){var t=this,l=t.xlist,i=l.getCellByRowOrCol(e);if(i&&i.element){var n=i.element.querySelector(t.userConfig.labelSelector);n&&n.style&&(n.style[a]="translateX(-"+t.userConfig.width+"px) ",n.style[o]=h+" 0.15s ease",l.getData(0,e).data.status="delete")}},slideRight:function(e){var t=this,l=t.xlist,i=l.getCellByRowOrCol(e);if(i&&i.element){var n=i.element.querySelector(t.userConfig.labelSelector);if(n&&n.style){var r=window.getComputedStyle(n)[a].match(/[-\d\.*\d*]+/g),s=r?Math.round(r[4]):0;0!=s&&(n.style[a]="translateX(0)",n.style[o]=h+" 0.5s ease",l.getData(0,e).data.status="")}}},slideLeftHandler:function(e){var t=this;u=!0,t.slideLeft(e.cell._row)},slideRightHandler:function(e){var t=this;g=!0,u=!0,t.slideRight(e.cell._row)},slideAllExceptRow:function(e){var t=this,l=t.xlist;for(var i in l.infiniteElementsCache)(e!=l.infiniteElementsCache[i]._row||void 0===e)&&t.slideRight(l.infiniteElementsCache[i]._row)}}),"object"==typeof i&&i.exports?void(i.exports=v):v});