define('kg/xscroll/2.3.0/pullup',["./util","./base"],function(require, exports, module) {var t,n=require("./util"),e=require("./base"),o="Loading...",i="Pull Up To Refresh",s="Release To Refresh",r="Last Page",l=60,u=40,a=function(t){a.superclass.constructor.call(this),this.userConfig=n.mix({upContent:i,downContent:s,pageEndContent:r,pullUpHeight:l,height:u,autoRefresh:!0,loadingContent:o,boundry:{},prefix:"xs-plugin-pullup-"},t)};n.extend(a,e,{pluginId:"xscroll/plugin/pullup",pluginInitializer:function(n){var e=this;e.xscroll=n,t=e.userConfig.prefix,e.xscroll&&e.xscroll.on("afterrender",function(){e.render()})},pluginDestructor:function(){var t=this;t.pullup&&t.pullup.remove(),t.xscroll.detach("scroll",t._scrollHandler),delete t},render:function(){var e=this;if(!e.__isRender){e.__isRender=!0;var o=t+"container",i=e.userConfig.height,s=e.pullup=document.createElement("div");s.className=o,s.style.position="absolute",s.style.width="100%",s.style.height=i+"px",s.style.bottom=-i+"px",e.xscroll.container.appendChild(s),e.xscroll.boundry.expandBottom(40),n.addClass(s,t+e.status),s.innerHTML=e.userConfig[e.status+"Content"]||e.userConfig.content,e._bindEvt()}},_bindEvt:function(){var t=this;if(!t._evtBinded){t._evtBinded=!0;var n=(t.pullup,t.xscroll);n.on("pan",function(n){t._scrollHandler(n)}),t.__isBoundryOut=!1,n.on("boundryout",function(){t.__isBoundryOut=!0}),n.on("scroll",function(e){e.offset.y+n.containerHeight>n.height+n.boundry._xtop+n.boundry._xbottom&&(t.__isBoundryOut=!1)}),t.userConfig.bufferHeight>0&&n.on("scroll",function(e){!t.isLoading&&Math.abs(e.offset.y)+n.height+t.userConfig.height+t.userConfig.bufferHeight>=n.containerHeight+n.boundry._xtop+n.boundry._xbottom&&t._changeStatus("loading")}),n.on("scrollend",function(e){"top"==e.directionY&&e.offset.y==n.height-n.containerHeight-t.userConfig.height&&t._changeStatus("loading")})}},_scrollHandler:function(){var t=this,n=t.xscroll,e=n.getOffsetTop();t._changeStatus(e<n.height-n.containerHeight-t.userConfig.pullUpHeight?"down":"up")},_changeStatus:function(e){if("loading"==e||!this.isLoading){var o=this.status;this.status=e,n.removeClass(this.pullup,t+o),n.addClass(this.pullup,t+e),this.setContent(this.userConfig[e+"Content"]),o!=e&&(this.fire("statuschange",{prevVal:o,newVal:e}),"loading"==e&&(this.isLoading=!0,this.fire("loading")))}},complete:function(){var t=this,n=t.xscroll;if(t.isLoading=!1,t._changeStatus("up"),t.userConfig.bufferHeight&&!t.__isBoundryOut){var e=n._bounce("y",n._prevSpeed);e&&t.xscroll.scrollY(e.offset,e.duration,e.easing,function(){n._scrollEndHandler("y")})}},reset:function(t){this.xscroll.boundry.resetBottom(),this.xscroll.bounce(!0,t),this._expanded=!1},setContent:function(t){var n=this;t&&(n.pullup.innerHTML=t)}}),module.exports=a;});